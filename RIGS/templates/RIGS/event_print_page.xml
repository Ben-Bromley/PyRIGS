<setNextFrame name="jobDetails"/>
<nextFrame/>
<blockTable style="headerTable" colWidths="123,124,123,123">
<tr>
    <td>Event Date:</td>
    <td>{{ object.start_date }}</td>
    <td>JOB NUMBER:</td>
    <td>N{{ object.pk|stringformat:"05d" }}</td>
</tr>
</blockTable>

<setNextFrame name="client"/>
<nextFrame/>
<keepInFrame>
<h2>Hirer</h2>
<h3>{{ object.person.name }}</h3>
<h3>{{ object.organisation.name|default_if_none:"" }}</h3>

{% if object.person.phone %}
    <para>Tel: {{ object.person.phone }}</para>
{% elif object.organisation.phone %}
    <para>Tel: {{ object.organisation.phone }}</para>
{% endif %}

{% if object.person.email %}
    <para>Email: {{ object.person.email }}</para>
{% elif object.organisation.email %}
    <para>Email: {{ object.organisation.email }}</para>
{% endif %}
</keepInFrame>

<setNextFrame name="venue"/>
<nextFrame/>
<keepInFrame>
<h2>Venue</h2>
<h3>{{ object.venue.name }}</h3>
<para>{{ object.venue.address|default_if_none:""|linebreaks }}</para>
</keepInFrame>

<setNextFrame name="event"/>
<nextFrame/>
<h2>Event Details</h2>
<blockTable style="eventDetails" colWidths="75,75">
<tr>
    <td>Start Time</td>
    <td>
        <para>{{ object.start_time|time:"H:i" }}
            <br/>
            {{ object.start_date|date:"(d/m/Y)" }}
        </para>
    </td>
</tr>
<tr>
    <td>End Time</td>
    <td>
        <para>{{ object.end_time|time:"H:i" }}
            <br/>
            {{ object.end_date|date:"(d/m/Y)" }}
        </para>
    </td>
</tr>
<tr>
    <td>Earliest Access</td>
    <td>
        <para>{{ object.access_at|time:"H:i" }}
            <br/>
            {{ object.access_at|date:"d/m/Y" }}
        </para>
    </td>
</tr>
</blockTable>

<setNextTemplate name="Main"/>
<setNextFrame name="main"/>
<nextFrame/>

<blockTable style="itemTable" colWidths="300,80,35,80">
<tr>
    {# Bold tags need to be in a para in order to render in reportlab #}
    <td>
        <para>
            <b>Equipment Details</b>
        </para>
    </td>
    <td>
        <para>
            <b>Price</b>
        </para>
    </td>
    <td>
        <para>
            <b>Qty</b>
        </para>
    </td>
    <td>
        <para>
            <b>Sub-total</b>
        </para>
    </td>
</tr>
{% for item in object.items.all %}
    <tr>
        <td>
            <para>{{ item.name }}
                {% if item.description %}
                    <br/>
                    <em>{{ item.description|linebreaks }}</em>
                {% endif %}
            </para>
        </td>
        <td>£ {{ item.cost|floatformat:2 }}</td>
        <td>{{ item.quantity }}</td>
        <td>£ {{ item.total_cost|floatformat:2 }}</td>
    </tr>
{% endfor %}
</blockTable>
<blockTable style="totalTable" colWidths="300,115,80">
<tr>
    <td>VAT may be charged at the current rate date of event ({{ object.vat_rate.as_percent|floatformat:2 }}%)</td>
    <td>Sum-total</td>
    <td>£ {{ object.sum_total|floatformat:2 }}</td>
</tr>
<tr>
    <td>VAT Registration Number: 116252989</td>
    <td>VAT @ {{ object.vat_rate.as_percent|floatformat:2 }}%</td>
    <td>£ {{ object.vat|floatformat:2 }}</td>
</tr>
<tr>
    <td>
        <para>
            <b>The full hire fee is payable at least 10 days before the event.</b>
        </para>
    </td>
    <td>
        <para>
            <b>Total</b>
        </para>
    </td>
    <td>
        <para>
            <b>£ {{ object.total|floatformat:2 }}</b>
        </para>
    </td>
</tr>
</blockTable>

<blockTable style="infoTable">
<tr>
    <td>
        <para>Bookings will
            <b>not</b>
            be confirmed until payment is received and the contract is signed.
        </para>
    </td>
</tr>
<tr>
    <td>24 Hour Emergency Contacts: 07825 065681 or 07825 065678</td>
</tr>
</blockTable>

<blockTable style="paymentTable" colWidths="100,146,93,154">
<tr></tr>
<tr>
    <td>Payment Received:</td>
    <td>{{ object.payment_received }}</td>
    <td>Payment Method:</td>
    <td>{{ object.payment_method }}</td>
</tr>
<tr></tr>
</blockTable>

<para style="blockPara">
<b>To be signed on booking:</b>
</para>
{% if object.organisation.union_account %}
    <para style="blockPara">
    <i>
        I agree that am authorised to sign this invoice. I agree that I am the President/Treasurer of the hirer, or
        that I have provided written permission from either the President or Treasurer of the hirer stating that I can
        sign for this invoice.
    </i>
    </para>
    <para style="blockPara">
    <i>
        I have read, understood and fully accepted the current conditions of hire. I agree to return any dry hire
        items to TEC PA &amp; Lighting in the same condition at the end of the hire period.
    </i>
    </para>

    <para style="blockPara">
    <b>
        Conditions of hire available on request or on the TEC PA &amp; Lighting website. E&amp;OE
    </b>
    </para>

    <para style="blockPara">
    Please return this form directly to TEC PA &amp; Lighting and not the Students' Union Finance Department.
    </para>

    <blockTable style="signatureTable" colWidths="70,100,325">
    <tr>
        <td>Account Code</td>
        <td></td>
        <td></td>
    </tr>
    </blockTable>

{% else %}
    <para style="blockPara">
    <i>
        I, the hirer, have read, understand and fully accept the current conditions of hire. This document forms a
        binding contract between TEC PA &amp; Lighting and the hirer, the aforementioned conditions of hire forming
        an integral part of it.
    </i>
    </para>

    <para style="blockPara">
    <b>
        Conditions of hire available on request or on the TEC PA &amp; Lighting website. E&amp;OE
    </b>
    </para>

    {% include "RIGS/event_print_signature.xml" %}

    <para style="blockPara">
    <b>To be signed on the day of the event/hire:</b>
    </para>
    <para style="blockPara">
    <i>
        I, the hirer, have received the goods/services as requested and in good order. I agree to return any dry hire
        items to TEC PA &amp; Lighting in a similar condition at the end of the hire period.
    </i>
    </para>
{% endif %}

{% include "RIGS/event_print_signature.xml" %}